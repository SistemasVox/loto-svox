model User {
  id                 Int                      @id @default(autoincrement())
  email              String                   @unique
  hashedPassword     String
  name               String?
  avatarUrl          String?
  plano_solicitado   String?
  data_solicitacao   DateTime?
  createdAt          DateTime                 @default(now())
  role               AdminRole?
  bets               Bet[]
  emailVerifications EmailVerificationToken[]
  notifications      Notification[]
  resetTokens        PasswordResetToken[]
  subscriptions      Subscription[]
}

model AdminRole {
  id        Int      @id @default(autoincrement())
  userId    Int      @unique
  nivel     String   @default("ADMIN")
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model EmailVerificationToken {
  id        Int      @id @default(autoincrement())
  userId    Int
  token     String   @unique
  newEmail  String
  expiresAt DateTime
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([token])
}

model PasswordResetToken {
  id        Int      @id @default(autoincrement())
  userId    Int
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
}
